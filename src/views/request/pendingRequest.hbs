{{#if Admin}}
<div class="col-md-10 mx-auto mt-0">
<div> 
  <hr>
  <h2> <p class="font-italic inline">Mantenimientos pendientes</p></h2>  
  <hr>
</div>
  {{#if pList}}
    <table class="table table-light table-bordered table-hover overflow-y: hidden" id="miTabla">
      <thead class="table-secondary">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Entidad</th>
          <th scope="col">Fecha de solicitud</th>
          <th scope="col">Fecha de mantenimiento</th>
          <th scope="col">Hora de mantenimiento</th>
          <th scope="col">Descripción</th>
          <th scope="col">Encargado</th>   
        </tr>
      </thead>
      <tbody>   
        {{#each pList}} 
          <tr>
            <td>{{company_request}}</td>
            <td>{{date_of_request}}</td>
            <td>{{date_of_maintenance}}</td>
            <td>{{hour_of_maintenance}}</td>
            <td>{{description}}</td>
            <td>{{employee_fullname}}</td>
          </tr>
        {{/each}}     
      </tbody>
    </table>
    <script>
        // JavaScript para asignar índices a las filas de la tabla
        document.addEventListener('DOMContentLoaded', function() {
            var tabla = document.getElementById('miTabla');
            var filas = tabla.getElementsByTagName('tr');

            for (var i = 1; i < filas.length; i++) {
                var celdaIndice = document.createElement('td');
                celdaIndice.textContent = i;
                celdaIndice.style.fontWeight = 'bold'; 
                filas[i].insertBefore(celdaIndice, filas[i].firstChild);
            }
        });

    </script>
  {{else}}
    <br>
    <br>
    <br>
    <div>
      <h4>No se encontraron mantenimientos pendientes.</h4>
    </div>
  {{/if}}
</div>
{{/if}}

{{#if Empleado}}
<div class="col-md-10 mx-auto mt-0">
<div> 
  <hr>
  <h2> <p class="font-italic inline">Mantenimientos asignados</p></h2>  
  <hr>
</div>
  {{#if pList}}
    <table class="table table-light table-bordered table-hover overflow-y: hidden" id="miTabla">
      <thead class="table-secondary">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Entidad</th>
          <th scope="col">Dirección</th>
          <th scope="col">Ciudad</th>
          <th scope="col">Teléfono</th>
          <th scope="col">Fecha de solicitud</th>
          <th scope="col">Fecha y hora de mantenimiento</th>
          <th scope="col">Descripción</th>
          <th scope="col">Finalizar</th>
        </tr>
      </thead>
      <tbody>   
        {{#each pList}} 
          <tr>
            <td>{{company_request}}</td>
            <td>{{company_request_ad}}</td>
            <td>{{company_request_city}}</td>
            <td>{{company_request_pho}}</td>
            <td>{{date_of_request}}</td>
            <td>{{date_of_maintenance}} {{hour_of_maintenance}}</td>
            <td>{{description}}</td>
            <td>
                <button type="button"  class="btn btn-success btn-block btn-sm" data-bs-toggle="modal" data-bs-target="#exampleModal">
              +
            </button>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Finalizar mantenimiento</h5>
                    <button type="button" class="btn-close fa fa-times fa-lg" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <p class="parrafoModal">A continuación, agregue un breve resumen de lo que se hizo en el mantenimiento:</p>
                    <form action="/request/Finished/{{id}}?_method=PUT" class= "justify-content-center" method="POST">  
                      <div class="col-md-12 mb-0"> 
                                        {{!-- <input type="text" class="form-control bg-light" name="description_of_exam" 
                                            placeholder="Agregue una Descripción" value="{{exam1.description_of_exam}}"> --}}
                          <textarea type="text" class="form-control bg-light" name="notes" rows="5"
                          placeholder="Notas del mantenimiento*">{{notes}}</textarea>
                      </div>
                      <div class="d-none">  
                              <select name="state" class="hidden" aria-hidden="true">
                                <option value="finalizado">finalizado</option>
                              </select>
                          </div>
                      <div class="modal-footer">                  
                        <button class="btn btn-primary">Finalizar</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                      </div>
                    </form>                    
                  </div>                  
                </div>
              </div>
            </div>
            </td>
          </tr>
        {{/each}}     
      </tbody>
    </table>
    <script>
        // JavaScript para asignar índices a las filas de la tabla
        document.addEventListener('DOMContentLoaded', function() {
            var tabla = document.getElementById('miTabla');
            var filas = tabla.getElementsByTagName('tr');

            for (var i = 1; i < filas.length; i++) {
                var celdaIndice = document.createElement('td');
                celdaIndice.textContent = i;
                celdaIndice.style.fontWeight = 'bold'; 
                filas[i].insertBefore(celdaIndice, filas[i].firstChild);
            }
        });

    </script>
  {{else}}
    <br>
    <br>
    <br>
    <div>
      <h4>No se encontraron mantenimientos pendientes.</h4>
    </div>
  {{/if}}
</div>
{{/if}}

{{#if Cliente}}
<div class="col-md-10 mx-auto mt-0">
<div> 
  <hr>
  <h2> <p class="font-italic inline">Mantenimientos pendientes</p></h2>  
  <hr>
</div>
  {{#if pList}}
    <table class="table table-light table-bordered table-hover overflow-y: hidden" id="miTabla">
      <thead class="table-secondary">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Entidad</th>
          <th scope="col">Fecha de solicitud</th>
          <th scope="col">Fecha de mantenimiento</th>
          <th scope="col">Hora de mantenimiento</th>
          <th scope="col">Descripción</th>
          <th scope="col">Empleado encargado</th>   
        </tr>
      </thead>
      <tbody>   
        {{#each pList}} 
          <tr>
            <td>{{company_request}}</td>
            <td>{{date_of_request}}</td>
            <td>{{date_of_maintenance}}</td>
            <td>{{hour_of_maintenance}}</td>
            <td>{{description}}</td>
            <td>{{employee_fullname}}</td>
          </tr>
        {{/each}}     
      </tbody>
    </table>
    <script>
        // JavaScript para asignar índices a las filas de la tabla
        document.addEventListener('DOMContentLoaded', function() {
            var tabla = document.getElementById('miTabla');
            var filas = tabla.getElementsByTagName('tr');

            for (var i = 1; i < filas.length; i++) {
                var celdaIndice = document.createElement('td');
                celdaIndice.textContent = i;
                celdaIndice.style.fontWeight = 'bold'; 
                filas[i].insertBefore(celdaIndice, filas[i].firstChild);
            }
        });

    </script>
  {{else}}
    <br>
    <br>
    <br>
    <div>
      <h4>No se encontraron mantenimientos pendientes.</h4>
    </div>
  {{/if}}
</div>
{{/if}}
